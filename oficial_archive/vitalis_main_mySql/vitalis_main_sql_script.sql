

-- DROP DATABASE vitalis;
CREATE DATABASE vitalis;
use vitalis;

CREATE TABLE empresa (
	idEmpresa INT PRIMARY KEY AUTO_INCREMENT,
    razaoSocial VARCHAR (100) NOT NULL,
    dataEntrada DATETIME DEFAULT CURRENT_TIMESTAMP,
	cnpj CHAR(14) NOT NULL UNIQUE,
    email VARCHAR(50),
    senha VARCHAR(100)
);

INSERT INTO empresa (razaoSocial, cnpj, email, senha) VALUES
	('AgroVale Indústria de Alimentos', '12345678000195', 'agrovale@gmail.com', 'agrovale123'),
	('Verde Monitoramento Ambiental', '98765432000110', 'verdemonitoramento@outlook.com', 'verdemonitor123'), 
	('CajuBrasil Companhia', '45678912000133', 'cajubrasil@gmail.com', 'cajubrasil123'),
	('Sol Nascente Produções Agrícolas', '11223344000177', 'nascentesol@gmail.com', 'solnascente0606'),
	('EcoSensores Monitoramento', '99887766000155', 'ecoSensores@gmail.com', 'ecoSensores123'),
	('NutriCaju Indústria de Beneficiamento', '22334455000166', 'natricaju_278@gmail.com', 'natri@caju'),
	('TechAgro Monitoramento Digital', '33445566000122', 'techagro@outlook.com', 'techagroagro444'),
	('Flor do Sertão Companhia', '44556677000188', 'florsertaneja@gmail.com', 'florsetao4500');


CREATE TABLE usuario (
	idUsuario INT AUTO_INCREMENT,
    idSupervisor INT,
    fkEmpresa INT,
    apelidoUsuario VARCHAR (100),
    cpf CHAR(11) NOT NULL UNIQUE,
    emailUsuario VARCHAR(45) NOT NULL UNIQUE,
	senha VARCHAR(45) NOT NULL,
    CONSTRAINT pk_usuario
		PRIMARY KEY (idUsuario, fkEmpresa),
	nivelCargo TINYINT NOT NULL,
    CONSTRAINT chkNivelCargo 
		CHECK (nivelCargo IN(1, 2, 3))
);

ALTER TABLE usuario 
	ADD CONSTRAINT fk_supervisor
		FOREIGN KEY (idSupervisor)
		REFERENCES usuario(idUsuario);
ALTER TABLE usuario 
	ADD CONSTRAINT fk_empresa_usuario
		FOREIGN KEY (fkEmpresa)
		REFERENCES empresa(idEmpresa);

desc usuario;
        
INSERT INTO usuario (idSupervisor, fkEmpresa, apelidoUsuario, cpf, emailUsuario, senha, nivelCargo) VALUES 
	(1, 1, 'Joana Silva', '52136987412', 'contato@agrovale.com.br', 'Senha#2025', 1),
	(2, 1, 'João Moraes', '56989871236', 'suporte@verdeambiental.com', 'Segura123!', 2),
	(3, 2, 'Wilton Machado', '46789120001', 'rh@cajubrasil.com', 'Cajuzinho@2025', 3),
	(4, 3, 'Solange Lima', '23344000177', 'admin@solnascente.com', 'ProdAgro!45', 3),
	(5, 3, 'Arthur Franco', '97766000155', 'eco@ecosensores.com.br', 'Monitor#2025', 2),
	(6, 4, 'Cássia Martins', '34455000166', 'contato@nutricaju.com.br', 'Ncaju_2025', 1),
	(7, 5, 'Augusto Torres', '37566000122', 'info@techagro.com', 'Tech@2025', 1),
	(8, 6, 'Flora Souza', '56677000188', 'comercial@florsertao.com.br', 'Flor2025!', 1);
    
    
CREATE TABLE plantacao(
	idPlantacao INT PRIMARY KEY AUTO_INCREMENT,
    fkEmpresa INT,
	areaM2 DECIMAL (7,2) NOT NULL,
    tipoSolo varchar(100) NOT NULL
);

ALTER TABLE plantacao 
	ADD constraint fk_empresa_plantacao
		foreign key (fkEmpresa)
        references empresa(idEmpresa);

INSERT INTO plantacao (idPlantacao, fkEmpresa, areaM2, tipoSolo) values 
(1,1,155.75,'Argissolo'),
(2,1,155.75,'Argissolo'),
(3,2,155.75,'Argissolo'),
(4,2,155.75,'Argissolo'),
(5,3,525.75,'Argissolo'),
(6,3,525.75,'Argissolo'),
(7,4,525.75,'Argissolo'),
(8,4,525.75,'Argissolo'),
(9,5,553.75,'Argissolo'),
(10,5,553.75,'Argissolo'),
(11,6,355.75,'Argissolo'),
(12,6,255.75,'Argissolo'),
(13,7,545.75,'Argissolo'),
(14,7,515.75,'Argissolo'),
(15,8,525.75,'Argissolo'),
(16,8,545.75,'Argissolo');

select * from plantacao;





CREATE TABLE sensor (
idSensor INT PRIMARY KEY AUTO_INCREMENT,
lote INT NOT NULL,
modelo VARCHAR(100) NOT NULL,
coordSensor CHAR(2) NOT NULL,
fkPlantacao INT NOT NULL
);

ALTER TABLE sensor 
	ADD CONSTRAINT fk_plantacao
		FOREIGN KEY (fkPlantacao)
        REFERENCES plantacao(idPlantacao);
   INSERT INTO sensor (lote, modelo, coordSensor, fkPlantacao) values 
( 1, 'capacitivo', 'A0', 1),
( 1, 'capacitivo', 'A1', 1),
( 1, 'capacitivo', 'A2', 1),
( 1, 'capacitivo', 'A3', 1),
( 1, 'capacitivo', 'B0', 1),
( 1, 'capacitivo', 'B1', 1),
( 1, 'capacitivo', 'B2', 1),
( 1, 'capacitivo', 'B3', 1),
( 1, 'capacitivo', 'C0', 1),
( 1, 'capacitivo', 'C1', 1),
( 1, 'capacitivo', 'C2', 1),
( 1, 'capacitivo', 'C3', 1),
( 1, 'capacitivo', 'D0', 1),
( 1, 'capacitivo', 'D1', 1),
( 1, 'capacitivo', 'D2', 1),
( 1, 'capacitivo', 'D3', 1),
( 2, 'capacitivo', 'A0', 1),
( 2, 'capacitivo', 'A1', 1),
( 2, 'capacitivo', 'A2', 1),
( 2, 'capacitivo', 'A3', 1),
( 2, 'capacitivo', 'B0', 1),
( 2, 'capacitivo', 'B1', 1),
( 2, 'capacitivo', 'B2', 1),
( 2, 'capacitivo', 'B3', 1),
( 2, 'capacitivo', 'C0', 1),
( 2, 'capacitivo', 'C1', 1),
( 2, 'capacitivo', 'C2', 1),
( 2, 'capacitivo', 'C3', 1),
( 2, 'capacitivo', 'D0', 1),
( 2, 'capacitivo', 'D1', 1),
( 2, 'capacitivo', 'D2', 1),
( 2, 'capacitivo', 'D3', 1),


( 1, 'capacitivo', 'A0', 2),
( 1, 'capacitivo', 'A1', 2),
( 1, 'capacitivo', 'A2', 2),
( 1, 'capacitivo', 'A3', 2),
( 1, 'capacitivo', 'B0', 2),
( 1, 'capacitivo', 'B1', 2),
( 1, 'capacitivo', 'B2', 2),
( 1, 'capacitivo', 'B3', 2),
( 1, 'capacitivo', 'C0', 2),
( 1, 'capacitivo', 'C1', 2),
( 1, 'capacitivo', 'C2', 2),
( 1, 'capacitivo', 'C3', 2),
( 1, 'capacitivo', 'D0', 2),
( 1, 'capacitivo', 'D1', 2),
( 1, 'capacitivo', 'D2', 2),
( 1, 'capacitivo', 'D3', 2),
( 2, 'capacitivo', 'A0', 2),
( 2, 'capacitivo', 'A1', 2),
( 2, 'capacitivo', 'A2', 2),
( 2, 'capacitivo', 'A3', 2),
( 2, 'capacitivo', 'B0', 2),
( 2, 'capacitivo', 'B1', 2),
( 2, 'capacitivo', 'B2', 2),
( 2, 'capacitivo', 'B3', 2),
( 2, 'capacitivo', 'C0', 2),
( 2, 'capacitivo', 'C1', 2),
( 2, 'capacitivo', 'C2', 2),
( 2, 'capacitivo', 'C3', 2),
( 2, 'capacitivo', 'D0', 2),
( 2, 'capacitivo', 'D1', 2),
( 2, 'capacitivo', 'D2', 2),
( 2, 'capacitivo', 'D3', 2),


( 1, 'capacitivo', 'A0', 3),
( 1, 'capacitivo', 'A1', 3),
( 1, 'capacitivo', 'A2', 3),
( 1, 'capacitivo', 'A3', 3),
( 1, 'capacitivo', 'B0', 3),
( 1, 'capacitivo', 'B1', 3),
( 1, 'capacitivo', 'B2', 3),
( 1, 'capacitivo', 'B3', 3),
( 1, 'capacitivo', 'C0', 3),
( 1, 'capacitivo', 'C1', 3),
( 1, 'capacitivo', 'C2', 3),
( 1, 'capacitivo', 'C3', 3),
( 1, 'capacitivo', 'D0', 3),
( 1, 'capacitivo', 'D1', 3),
( 1, 'capacitivo', 'D2', 3),
( 1, 'capacitivo', 'D3', 3),
( 2, 'capacitivo', 'A0', 3),
( 2, 'capacitivo', 'A1', 3),
( 2, 'capacitivo', 'A2', 3),
( 2, 'capacitivo', 'A3', 3),
( 2, 'capacitivo', 'B0', 3),
( 2, 'capacitivo', 'B1', 3),
( 2, 'capacitivo', 'B2', 3),
( 2, 'capacitivo', 'B3', 3),
( 2, 'capacitivo', 'C0', 3),
( 2, 'capacitivo', 'C1', 3),
( 2, 'capacitivo', 'C2', 3),
( 2, 'capacitivo', 'C3', 3),
( 2, 'capacitivo', 'D0', 3),
( 2, 'capacitivo', 'D1', 3),
( 2, 'capacitivo', 'D2', 3),
( 2, 'capacitivo', 'D3', 3),

( 1, 'capacitivo', 'A0', 4),
( 1, 'capacitivo', 'A1', 4),
( 1, 'capacitivo', 'A2', 4),
( 1, 'capacitivo', 'A3', 4),
( 1, 'capacitivo', 'B0', 4),
( 1, 'capacitivo', 'B1', 4),
( 1, 'capacitivo', 'B2', 4),
( 1, 'capacitivo', 'B3', 4),
( 1, 'capacitivo', 'C0', 4),
( 1, 'capacitivo', 'C1', 4),
( 1, 'capacitivo', 'C2', 4),
( 1, 'capacitivo', 'C3', 4),
( 1, 'capacitivo', 'D0', 4),
( 1, 'capacitivo', 'D1', 4),
( 1, 'capacitivo', 'D2', 4),
( 1, 'capacitivo', 'D3', 4),
( 2, 'capacitivo', 'A0', 4),
( 2, 'capacitivo', 'A1', 4),
( 2, 'capacitivo', 'A2', 4),
( 2, 'capacitivo', 'A3', 4),
( 2, 'capacitivo', 'B0', 4),
( 2, 'capacitivo', 'B1', 4),
( 2, 'capacitivo', 'B2', 4),
( 2, 'capacitivo', 'B3', 4),
( 2, 'capacitivo', 'C0', 4),
( 2, 'capacitivo', 'C1', 4),
( 2, 'capacitivo', 'C2', 4),
( 2, 'capacitivo', 'C3', 4),
( 2, 'capacitivo', 'D0', 4),
( 2, 'capacitivo', 'D1', 4),
( 2, 'capacitivo', 'D2', 4),
( 2, 'capacitivo', 'D3', 4),

( 1, 'capacitivo', 'A0', 5),
( 1, 'capacitivo', 'A0', 6),
( 1, 'capacitivo', 'A0', 7),
( 1, 'capacitivo', 'A0', 8),
( 1, 'capacitivo', 'A0', 9),
( 1, 'capacitivo', 'A0', 10),
( 1, 'capacitivo', 'A0', 11),
( 1, 'capacitivo', 'A0', 12),
( 1, 'capacitivo', 'A0', 13),
( 1, 'capacitivo', 'A0', 14),
( 1, 'capacitivo', 'A0', 15),
( 1, 'capacitivo', 'A0', 16),
( 1, 'capacitivo', 'A1', 5),
( 1, 'capacitivo', 'A1', 6),
( 1, 'capacitivo', 'A1', 7),
( 1, 'capacitivo', 'A1', 8),
( 1, 'capacitivo', 'A1', 9),
( 1, 'capacitivo', 'A1', 10),
( 1, 'capacitivo', 'A1', 11),
( 1, 'capacitivo', 'A1', 12),
( 1, 'capacitivo', 'A1', 13),
( 1, 'capacitivo', 'A1', 14),
( 1, 'capacitivo', 'A1', 15),
( 1, 'capacitivo', 'A1', 16),
( 1, 'capacitivo', 'A2', 5),
( 1, 'capacitivo', 'A2', 6),
( 1, 'capacitivo', 'A2', 7),
( 1, 'capacitivo', 'A2', 8),
( 1, 'capacitivo', 'A2', 9),
( 1, 'capacitivo', 'A2', 10),
( 1, 'capacitivo', 'A2', 11),
( 1, 'capacitivo', 'A2', 12),
( 1, 'capacitivo', 'A2', 13),
( 1, 'capacitivo', 'A2', 14),
( 1, 'capacitivo', 'A2', 15),
( 1, 'capacitivo', 'A2', 16),
( 1, 'capacitivo', 'A3', 5),
( 1, 'capacitivo', 'A3', 6),
( 1, 'capacitivo', 'A3', 7),
( 1, 'capacitivo', 'A3', 8),
( 1, 'capacitivo', 'A3', 9),
( 1, 'capacitivo', 'A3', 10),
( 1, 'capacitivo', 'A3', 11),
( 1, 'capacitivo', 'A3', 12),
( 1, 'capacitivo', 'A3', 13),
( 1, 'capacitivo', 'A3', 14),
( 1, 'capacitivo', 'A3', 15),
( 1, 'capacitivo', 'A3', 16),
( 1, 'capacitivo', 'B0', 5),
( 1, 'capacitivo', 'B0', 6),
( 1, 'capacitivo', 'B0', 7),
( 1, 'capacitivo', 'B0', 8),
( 1, 'capacitivo', 'B0', 9),
( 1, 'capacitivo', 'B0', 10),
( 1, 'capacitivo', 'B0', 11),
( 1, 'capacitivo', 'B0', 12),
( 1, 'capacitivo', 'B0', 13),
( 1, 'capacitivo', 'B0', 14),
( 1, 'capacitivo', 'B0', 15),
( 1, 'capacitivo', 'B0', 16),
( 1, 'capacitivo', 'B1', 5),
( 1, 'capacitivo', 'B1', 6),
( 1, 'capacitivo', 'B1', 7),
( 1, 'capacitivo', 'B1', 8),
( 1, 'capacitivo', 'B1', 9),
( 1, 'capacitivo', 'B1', 10),
( 1, 'capacitivo', 'B1', 11),
( 1, 'capacitivo', 'B1', 12),
( 1, 'capacitivo', 'B1', 13),
( 1, 'capacitivo', 'B1', 14),
( 1, 'capacitivo', 'B1', 15),
( 1, 'capacitivo', 'B1', 16),
( 1, 'capacitivo', 'B2', 5),
( 1, 'capacitivo', 'B2', 6),
( 1, 'capacitivo', 'B2', 7),
( 1, 'capacitivo', 'B2', 8),
( 1, 'capacitivo', 'B2', 9),
( 1, 'capacitivo', 'B2', 10),
( 1, 'capacitivo', 'B2', 11),
( 1, 'capacitivo', 'B2', 12),
( 1, 'capacitivo', 'B2', 13),
( 1, 'capacitivo', 'B2', 14),
( 1, 'capacitivo', 'B2', 15),
( 1, 'capacitivo', 'B2', 16),
( 1, 'capacitivo', 'B3', 5),
( 1, 'capacitivo', 'B3', 6),
( 1, 'capacitivo', 'B3', 7),
( 1, 'capacitivo', 'B3', 8),
( 1, 'capacitivo', 'B3', 9),
( 1, 'capacitivo', 'B3', 10),
( 1, 'capacitivo', 'B3', 11),
( 1, 'capacitivo', 'B3', 12),
( 1, 'capacitivo', 'B3', 13),
( 1, 'capacitivo', 'B3', 14),
( 1, 'capacitivo', 'B3', 15),
( 1, 'capacitivo', 'B3', 16),
( 1, 'capacitivo', 'C0', 5),
( 1, 'capacitivo', 'C0', 6),
( 1, 'capacitivo', 'C0', 7),
( 1, 'capacitivo', 'C0', 8),
( 1, 'capacitivo', 'C0', 9),
( 1, 'capacitivo', 'C0', 10),
( 1, 'capacitivo', 'C0', 11),
( 1, 'capacitivo', 'C0', 12),
( 1, 'capacitivo', 'C0', 13),
( 1, 'capacitivo', 'C0', 14),
( 1, 'capacitivo', 'C0', 15),
( 1, 'capacitivo', 'C0', 16),
( 1, 'capacitivo', 'C1', 5),
( 1, 'capacitivo', 'C1', 6),
( 1, 'capacitivo', 'C1', 7),
( 1, 'capacitivo', 'C1', 8),
( 1, 'capacitivo', 'C1', 9),
( 1, 'capacitivo', 'C1', 10),
( 1, 'capacitivo', 'C1', 11),
( 1, 'capacitivo', 'C1', 12),
( 1, 'capacitivo', 'C1', 13),
( 1, 'capacitivo', 'C1', 14),
( 1, 'capacitivo', 'C1', 15),
( 1, 'capacitivo', 'C1', 16),
( 1, 'capacitivo', 'C2', 5),
( 1, 'capacitivo', 'C2', 6),
( 1, 'capacitivo', 'C2', 7),
( 1, 'capacitivo', 'C2', 8),
( 1, 'capacitivo', 'C2', 9),
( 1, 'capacitivo', 'C2', 10),
( 1, 'capacitivo', 'C2', 11),
( 1, 'capacitivo', 'C2', 12),
( 1, 'capacitivo', 'C2', 13),
( 1, 'capacitivo', 'C2', 14),
( 1, 'capacitivo', 'C2', 15),
( 1, 'capacitivo', 'C2', 16),
( 1, 'capacitivo', 'C3', 5),
( 1, 'capacitivo', 'C3', 6),
( 1, 'capacitivo', 'C3', 7),
( 1, 'capacitivo', 'C3', 8),
( 1, 'capacitivo', 'C3', 9),
( 1, 'capacitivo', 'C3', 10),
( 1, 'capacitivo', 'C3', 11),
( 1, 'capacitivo', 'C3', 12),
( 1, 'capacitivo', 'C3', 13),
( 1, 'capacitivo', 'C3', 14),
( 1, 'capacitivo', 'C3', 15),
( 1, 'capacitivo', 'C3', 16),
( 1, 'capacitivo', 'D0', 5),
( 1, 'capacitivo', 'D0', 6),
( 1, 'capacitivo', 'D0', 7),
( 1, 'capacitivo', 'D0', 8),
( 1, 'capacitivo', 'D0', 9),
( 1, 'capacitivo', 'D0', 10),
( 1, 'capacitivo', 'D0', 11),
( 1, 'capacitivo', 'D0', 12),
( 1, 'capacitivo', 'D0', 13),
( 1, 'capacitivo', 'D0', 14),
( 1, 'capacitivo', 'D0', 15),
( 1, 'capacitivo', 'D0', 16),
( 1, 'capacitivo', 'D1', 5),
( 1, 'capacitivo', 'D1', 6),
( 1, 'capacitivo', 'D1', 7),
( 1, 'capacitivo', 'D1', 8),
( 1, 'capacitivo', 'D1', 9),
( 1, 'capacitivo', 'D1', 10),
( 1, 'capacitivo', 'D1', 11),
( 1, 'capacitivo', 'D1', 12),
( 1, 'capacitivo', 'D1', 13),
( 1, 'capacitivo', 'D1', 14),
( 1, 'capacitivo', 'D1', 15),
( 1, 'capacitivo', 'D1', 16),
( 1, 'capacitivo', 'D2', 5),
( 1, 'capacitivo', 'D2', 6),
( 1, 'capacitivo', 'D2', 7),
( 1, 'capacitivo', 'D2', 8),
( 1, 'capacitivo', 'D2', 9),
( 1, 'capacitivo', 'D2', 10),
( 1, 'capacitivo', 'D2', 11),
( 1, 'capacitivo', 'D2', 12),
( 1, 'capacitivo', 'D2', 13),
( 1, 'capacitivo', 'D2', 14),
( 1, 'capacitivo', 'D2', 15),
( 1, 'capacitivo', 'D2', 16),
( 1, 'capacitivo', 'D3', 5),
( 1, 'capacitivo', 'D3', 6),
( 1, 'capacitivo', 'D3', 7),
( 1, 'capacitivo', 'D3', 8),
( 1, 'capacitivo', 'D3', 9),
( 1, 'capacitivo', 'D3', 10),
( 1, 'capacitivo', 'D3', 11),
( 1, 'capacitivo', 'D3', 12),
( 1, 'capacitivo', 'D3', 13),
( 1, 'capacitivo', 'D3', 14),
( 1, 'capacitivo', 'D3', 15),
( 1, 'capacitivo', 'D3', 16),
( 2, 'capacitivo', 'A0', 5),
( 2, 'capacitivo', 'A0', 6),
( 2, 'capacitivo', 'A0', 7),
( 2, 'capacitivo', 'A0', 8),
( 2, 'capacitivo', 'A0', 9),
( 2, 'capacitivo', 'A0', 10),
( 2, 'capacitivo', 'A0', 11),
( 2, 'capacitivo', 'A0', 12),
( 2, 'capacitivo', 'A0', 13),
( 2, 'capacitivo', 'A0', 14),
( 2, 'capacitivo', 'A0', 15),
( 2, 'capacitivo', 'A0', 16),
( 2, 'capacitivo', 'A1', 5),
( 2, 'capacitivo', 'A1', 6),
( 2, 'capacitivo', 'A1', 7),
( 2, 'capacitivo', 'A1', 8),
( 2, 'capacitivo', 'A1', 9),
( 2, 'capacitivo', 'A1', 10),
( 2, 'capacitivo', 'A1', 11),
( 2, 'capacitivo', 'A1', 12),
( 2, 'capacitivo', 'A1', 13),
( 2, 'capacitivo', 'A1', 14),
( 2, 'capacitivo', 'A1', 15),
( 2, 'capacitivo', 'A1', 16),
( 2, 'capacitivo', 'A2', 5),
( 2, 'capacitivo', 'A2', 6),
( 2, 'capacitivo', 'A2', 7),
( 2, 'capacitivo', 'A2', 8),
( 2, 'capacitivo', 'A2', 9),
( 2, 'capacitivo', 'A2', 10),
( 2, 'capacitivo', 'A2', 11),
( 2, 'capacitivo', 'A2', 12),
( 2, 'capacitivo', 'A2', 13),
( 2, 'capacitivo', 'A2', 14),
( 2, 'capacitivo', 'A2', 15),
( 2, 'capacitivo', 'A2', 16),
( 2, 'capacitivo', 'A3', 5),
( 2, 'capacitivo', 'A3', 6),
( 2, 'capacitivo', 'A3', 7),
( 2, 'capacitivo', 'A3', 8),
( 2, 'capacitivo', 'A3', 9),
( 2, 'capacitivo', 'A3', 10),
( 2, 'capacitivo', 'A3', 11),
( 2, 'capacitivo', 'A3', 12),
( 2, 'capacitivo', 'A3', 13),
( 2, 'capacitivo', 'A3', 14),
( 2, 'capacitivo', 'A3', 15),
( 2, 'capacitivo', 'A3', 16),
( 2, 'capacitivo', 'B0', 5),
( 2, 'capacitivo', 'B0', 6),
( 2, 'capacitivo', 'B0', 7),
( 2, 'capacitivo', 'B0', 8),
( 2, 'capacitivo', 'B0', 9),
( 2, 'capacitivo', 'B0', 10),
( 2, 'capacitivo', 'B0', 11),
( 2, 'capacitivo', 'B0', 12),
( 2, 'capacitivo', 'B0', 13),
( 2, 'capacitivo', 'B0', 14),
( 2, 'capacitivo', 'B0', 15),
( 2, 'capacitivo', 'B0', 16),
( 2, 'capacitivo', 'B1', 5),
( 2, 'capacitivo', 'B1', 6),
( 2, 'capacitivo', 'B1', 7),
( 2, 'capacitivo', 'B1', 8),
( 2, 'capacitivo', 'B1', 9),
( 2, 'capacitivo', 'B1', 10),
( 2, 'capacitivo', 'B1', 11),
( 2, 'capacitivo', 'B1', 12),
( 2, 'capacitivo', 'B1', 13),
( 2, 'capacitivo', 'B1', 14),
( 2, 'capacitivo', 'B1', 15),
( 2, 'capacitivo', 'B1', 16),
( 2, 'capacitivo', 'B2', 5),
( 2, 'capacitivo', 'B2', 6),
( 2, 'capacitivo', 'B2', 7),
( 2, 'capacitivo', 'B2', 8),
( 2, 'capacitivo', 'B2', 9),
( 2, 'capacitivo', 'B2', 10),
( 2, 'capacitivo', 'B2', 11),
( 2, 'capacitivo', 'B2', 12),
( 2, 'capacitivo', 'B2', 13),
( 2, 'capacitivo', 'B2', 14),
( 2, 'capacitivo', 'B2', 15),
( 2, 'capacitivo', 'B2', 16),
( 2, 'capacitivo', 'B3', 5),
( 2, 'capacitivo', 'B3', 6),
( 2, 'capacitivo', 'B3', 7),
( 2, 'capacitivo', 'B3', 8),
( 2, 'capacitivo', 'B3', 9),
( 2, 'capacitivo', 'B3', 10),
( 2, 'capacitivo', 'B3', 11),
( 2, 'capacitivo', 'B3', 12),
( 2, 'capacitivo', 'B3', 13),
( 2, 'capacitivo', 'B3', 14),
( 2, 'capacitivo', 'B3', 15),
( 2, 'capacitivo', 'B3', 16),
( 2, 'capacitivo', 'C0', 5),
( 2, 'capacitivo', 'C0', 6),
( 2, 'capacitivo', 'C0', 7),
( 2, 'capacitivo', 'C0', 8),
( 2, 'capacitivo', 'C0', 9),
( 2, 'capacitivo', 'C0', 10),
( 2, 'capacitivo', 'C0', 11),
( 2, 'capacitivo', 'C0', 12),
( 2, 'capacitivo', 'C0', 13),
( 2, 'capacitivo', 'C0', 14),
( 2, 'capacitivo', 'C0', 15),
( 2, 'capacitivo', 'C0', 16),
( 2, 'capacitivo', 'C1', 5),
( 2, 'capacitivo', 'C1', 6),
( 2, 'capacitivo', 'C1', 7),
( 2, 'capacitivo', 'C1', 8),
( 2, 'capacitivo', 'C1', 9),
( 2, 'capacitivo', 'C1', 10),
( 2, 'capacitivo', 'C1', 11),
( 2, 'capacitivo', 'C1', 12),
( 2, 'capacitivo', 'C1', 13),
( 2, 'capacitivo', 'C1', 14),
( 2, 'capacitivo', 'C1', 15),
( 2, 'capacitivo', 'C1', 16),
( 2, 'capacitivo', 'C2', 5),
( 2, 'capacitivo', 'C2', 6),
( 2, 'capacitivo', 'C2', 7),
( 2, 'capacitivo', 'C2', 8),
( 2, 'capacitivo', 'C2', 9),
( 2, 'capacitivo', 'C2', 10),
( 2, 'capacitivo', 'C2', 11),
( 2, 'capacitivo', 'C2', 12),
( 2, 'capacitivo', 'C2', 13),
( 2, 'capacitivo', 'C2', 14),
( 2, 'capacitivo', 'C2', 15),
( 2, 'capacitivo', 'C2', 16),
( 2, 'capacitivo', 'C3', 5),
( 2, 'capacitivo', 'C3', 6),
( 2, 'capacitivo', 'C3', 7),
( 2, 'capacitivo', 'C3', 8),
( 2, 'capacitivo', 'C3', 9),
( 2, 'capacitivo', 'C3', 10),
( 2, 'capacitivo', 'C3', 11),
( 2, 'capacitivo', 'C3', 12),
( 2, 'capacitivo', 'C3', 13),
( 2, 'capacitivo', 'C3', 14),
( 2, 'capacitivo', 'C3', 15),
( 2, 'capacitivo', 'C3', 16),
( 2, 'capacitivo', 'D0', 5),
( 2, 'capacitivo', 'D0', 6),
( 2, 'capacitivo', 'D0', 7),
( 2, 'capacitivo', 'D0', 8),
( 2, 'capacitivo', 'D0', 9),
( 2, 'capacitivo', 'D0', 10),
( 2, 'capacitivo', 'D0', 11),
( 2, 'capacitivo', 'D0', 12),
( 2, 'capacitivo', 'D0', 13),
( 2, 'capacitivo', 'D0', 14),
( 2, 'capacitivo', 'D0', 15),
( 2, 'capacitivo', 'D0', 16),
( 2, 'capacitivo', 'D1', 5),
( 2, 'capacitivo', 'D1', 6),
( 2, 'capacitivo', 'D1', 7),
( 2, 'capacitivo', 'D1', 8),
( 2, 'capacitivo', 'D1', 9),
( 2, 'capacitivo', 'D1', 10),
( 2, 'capacitivo', 'D1', 11),
( 2, 'capacitivo', 'D1', 12),
( 2, 'capacitivo', 'D1', 13),
( 2, 'capacitivo', 'D1', 14),
( 2, 'capacitivo', 'D1', 15),
( 2, 'capacitivo', 'D1', 16),
( 2, 'capacitivo', 'D2', 5),
( 2, 'capacitivo', 'D2', 6),
( 2, 'capacitivo', 'D2', 7),
( 2, 'capacitivo', 'D2', 8),
( 2, 'capacitivo', 'D2', 9),
( 2, 'capacitivo', 'D2', 10),
( 2, 'capacitivo', 'D2', 11),
( 2, 'capacitivo', 'D2', 12),
( 2, 'capacitivo', 'D2', 13),
( 2, 'capacitivo', 'D2', 14),
( 2, 'capacitivo', 'D2', 15),
( 2, 'capacitivo', 'D2', 16),
( 2, 'capacitivo', 'D3', 5),
( 2, 'capacitivo', 'D3', 6),
( 2, 'capacitivo', 'D3', 7),
( 2, 'capacitivo', 'D3', 8),
( 2, 'capacitivo', 'D3', 9),
( 2, 'capacitivo', 'D3', 10),
( 2, 'capacitivo', 'D3', 11),
( 2, 'capacitivo', 'D3', 12),
( 2, 'capacitivo', 'D3', 13),
( 2, 'capacitivo', 'D3', 14),
( 2, 'capacitivo', 'D3', 15),
( 2, 'capacitivo', 'D3', 16);

CREATE TABLE leitura (
	idLeitura INT AUTO_INCREMENT,
	dataLeitura DATETIME DEFAULT CURRENT_TIMESTAMP,
    fkSensor INT,
	leituraUmidadeSolo DECIMAL(5,2) NOT NULL,
		CONSTRAINT pkLeitura
			PRIMARY KEY (idLeitura, fkSensor),
		CONSTRAINT fkLeituraSensor
			FOREIGN KEY (fkSensor) REFERENCES sensor (idSensor)
);

    show tables;
            select * from empresa;
            select * from plantacao;
            select * from sensor;
            select * from leitura;
            select * from usuario;
            
			describe empresa;
            describe plantacao;
            describe sensor;
            describe leitura;
            describe usuario;

-- VIEWS PARA A DASHBOARD (acrescentar datas e horas diferentes para a dashboard diária e semanal)   
        
CREATE VIEW vw_kpiUmidade 
AS SELECT 
    AVG(leitura.leituraUmidadeSolo) AS media,
    plantacao.fkEmpresa as idEmpresa
	FROM leitura JOIN sensor 
    ON leitura.fkSensor = sensor.idSensor 
    JOIN plantacao 
    ON sensor.fkPlantacao = plantacao.idPlantacao
	WHERE ((leitura.dataLeitura) >= (NOW() - INTERVAL 5 MINUTE))
    GROUP BY plantacao.fkEmpresa;
select * from sensor;
CREATE VIEW vw_kpiQtdSensores 
	AS SELECT 
		COUNT(idSensor) as quantidade,
		plantacao.idPlantacao as idPlantacao
		FROM sensor JOIN plantacao 
		ON sensor.fkPlantacao = plantacao.idPlantacao 
		JOIN empresa 
		ON plantacao.fkEmpresa = empresa.idEmpresa
		GROUP BY plantacao.idPlantacao; 